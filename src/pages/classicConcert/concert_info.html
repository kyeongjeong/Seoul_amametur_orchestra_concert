<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>concert_info</title>
    <link rel="stylesheet" href="style.css" />
</head>
<body>

<!-- 헤더 구조 -->
<header class="header">
    <div class="logo">Seoul Armateur<br>Orchestra Club</div>
    <nav class="menu">
        <a href="#" class="menu-item">Home</a>
        <a href="#" class="menu-item">Orchestra Club</a>
        <a href="#" class="menu-item" id="current">Classic Concert</a>     <!-- 본인이 만든 페이지 부분을 id current로 바꾸기 -->
    </nav>
</header>

<!-- 현재 메뉴 표시 바 -->
<div class="current-menu-bar">home -> Classic Concert</div>

<!-- 내용 -->
<div class="content">
    <div class="title-container">
        <div class="title-rectangle"></div>
        <h1 class="title">공연 정보 소개</h1>
    </div>

    <p class="map-description">파란색 마커를 클릭하면 세부 정보를 확인할 수 있습니다.</p>
    
    <div id="map"></div>
        <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey="></script>
        <script>
            var mapContainer = document.getElementById('map'),
                mapOption = { 
                    center: new kakao.maps.LatLng(37.611369, 127.059208), // 지도 중심좌표
                    level: 7 // 확대
                };

            var map = new kakao.maps.Map(mapContainer, mapOption);

            // 마커위치
            var positions = [
                {
                    title: '광운대학교',
                    latLng: new kakao.maps.LatLng(37.619247, 127.058271),
                    iwRemoveable: false,
                    content:  '<div class="wrap">' + 
                        '    <div class="info">' + 
                        '        <div class="title">' + 
                        '            공연이름' + 
                        '            <div class="close" onclick="closeOverlay(' + 0 + ')" title="닫기"></div>' + 
                        '        </div>' + 
                        '        <div class="body">' + 
                        '            <div class="img">' +
                        '                <img src="/public/images/kwangwoon.jpg" width="73" height="70">' +
                        '           </div>' + 
                        '            <div class="desc">' + 
                        '                <div class="ellipsis">서울 노원구 광운로 20</div>' + 
                        '                <div class="jibun ellipsis">날짜' + 
                        '                <div><a href="https://www.kw.ac.kr/ko/" target="_blank" class="link">홈페이지</a></div>' + 
                        '            </div>' + 
                        '        </div>' + 
                        '    </div>' +    
                        '</div>'
                },
                {
                    title: '경희대학교',
                    latLng: new kakao.maps.LatLng(37.597173, 127.051746),
                    iwRemoveable: false,
                    content:  '<div class="wrap">' + 
                        '    <div class="info">' + 
                        '        <div class="title">' + 
                        '            경희대학교' + 
                        '            <div class="close" onclick="closeOverlay(' + 1 + ')" title="닫기"></div>' + 
                        '        </div>' + 
                        '        <div class="body">' + 
                        '            <div class="img">' +
                        '                <img src="/public/images/kyunghee.jpg" width="73" height="70">' +
                        '           </div>' + 
                        '            <div class="desc">' + 
                        '                <div class="ellipsis">서울 동대문구 경희대로 26</div>' + 
                        '                <div class="jibun ellipsis">(우) 02447 (지번) 회기동 1-5</div>' + 
                        '                <div><a href="http://www.khu.ac.kr/" target="_blank" class="link">홈페이지</a></div>' + 
                        '            </div>' + 
                        '        </div>' + 
                        '    </div>' +    
                        '</div>'
                }
            ];

            var overlays = []; // 열린 오버레이를 저장할 배열

            // 마커와 커스텀 오버레이 생성
            positions.forEach(function(position) {
                var marker = new kakao.maps.Marker({
                    map: map,
                    position: position.latLng
                });

                var overlay = new kakao.maps.CustomOverlay({
                    content: position.content,
                    position: position.latLng,
                    map: null // 처음에는 보이지 않도록 설정
                });

                overlays.push(overlay);

                // 마커 클릭 시 오버레이 표시/닫기
                kakao.maps.event.addListener(marker, 'click', function() {
                    if (overlay.getMap()) {
                        overlay.setMap(null); // 오버레이가 열려 있다면 닫기
                    } else {
                        closeAllOverlays(); // 모든 오버레이 닫기
                        overlay.setMap(map); // 해당 오버레이 표시
                    }
                });
            });

            // 모든 오버레이 닫기
            function closeAllOverlays() {
                overlays.forEach(function(overlay) {
                    overlay.setMap(null);
                });
            }

            // 특정 오버레이 닫기
            function closeOverlay(index) {
                overlays[index].setMap(null);
            }
        </script>

    <div class="dividing_line"></div>

    <div class="title-container">
        <div class="title-rectangle"></div>
        <h1 class="title">Today's Classic Concert</h1>
    </div>
    
    <div id="concert-list" class="concert-list"></div>

    <script src="script.js"></script>


</div>

</body>
</html>
